# æç¤ºè¯ç®¡ç†å¹³å°

ä¸€ä¸ªç°ä»£åŒ–çš„ AI æç¤ºè¯ç®¡ç†å¹³å°ï¼Œé‡‡ç”¨ Flask åº”ç”¨å·¥å‚æ¨¡å¼æ„å»ºï¼Œæ”¯æŒå¤šç”¨æˆ·åä½œã€ç‰ˆæœ¬æ§åˆ¶å’Œåˆ†ç±»ç®¡ç†ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **ğŸ“ æç¤ºè¯ç®¡ç†**ï¼šåˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤å’Œåˆ†äº« AI æç¤ºè¯
- **ğŸ‘¥ ç”¨æˆ·ç³»ç»Ÿ**ï¼šæ”¯æŒç”¨æˆ·æ³¨å†Œå’Œç™»å½•ï¼Œéœ€è¦é‚€è¯·ç 
- **ğŸ·ï¸ æ ‡ç­¾åˆ†ç±»**ï¼šé€šè¿‡æ ‡ç­¾ç»„ç»‡å’Œåˆ†ç±»æç¤ºè¯
- **â­ æ”¶è—åŠŸèƒ½**ï¼šæ”¶è—å¸¸ç”¨æç¤ºè¯ä¾¿äºå¿«é€Ÿè®¿é—®
- **ğŸ”’ æƒé™æ§åˆ¶**ï¼šè®¾ç½®æç¤ºè¯ä¸ºå…¬å¼€æˆ–ç§æœ‰æ¨¡å¼
- **ğŸ” æœç´¢åŠŸèƒ½**ï¼šæŒ‰æ ‡é¢˜ã€æè¿°å’Œæ ‡ç­¾æœç´¢æç¤ºè¯
- **ğŸ“± å“åº”å¼è®¾è®¡**ï¼šé€‚é…ç”µè„‘ã€å¹³æ¿å’Œæ‰‹æœºç­‰å„ç§è®¾å¤‡å±å¹•
- **âš™ï¸ ç®¡ç†å‘˜é¢æ¿**ï¼šç®¡ç†ç”¨æˆ·å’Œé‚€è¯·ç 
- **ğŸ“Š æ•°æ®ç»Ÿè®¡**ï¼šæŸ¥çœ‹æç¤ºè¯æµè§ˆé‡å’Œåˆ†äº«æ¬¡æ•°

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯

- **Flask 2.2.5** - Python Web æ¡†æ¶
- **SQLite** - è½»é‡çº§æ•°æ®åº“ï¼ˆå¯æ‰©å±•åˆ° PostgreSQL/MySQLï¼‰
- **Gunicorn/Waitress** - WSGI æœåŠ¡å™¨

### å‰ç«¯

- **Bootstrap 5** - å“åº”å¼ UI æ¡†æ¶
- **JavaScript** - äº¤äº’é€»è¾‘
- **Jinja2** - æ¨¡æ¿å¼•æ“

### éƒ¨ç½²

- **Docker** - å®¹å™¨åŒ–éƒ¨ç½²
- **Nginx** - åå‘ä»£ç†å’Œé™æ€æ–‡ä»¶æœåŠ¡
- **Docker Compose** - å®¹å™¨ç¼–æ’

## ğŸ“ é¡¹ç›®ç»“æ„

```
prompt-manager/
â”œâ”€â”€ app/                      # åº”ç”¨ä¸»åŒ…
â”‚   â”œâ”€â”€ __init__.py          # åº”ç”¨å·¥å‚å‡½æ•°
â”‚   â”œâ”€â”€ config.py            # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ extensions.py        # æ‰©å±•åˆå§‹åŒ–
â”‚   â”œâ”€â”€ database/            # æ•°æ®åº“å±‚
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ db.py            # æ•°æ®åº“è¿æ¥å’Œæ“ä½œ
â”‚   â”œâ”€â”€ routes/              # è·¯ç”±å±‚ï¼ˆè“å›¾ï¼‰
â”‚   â”‚   â”œâ”€â”€ __init__.py      # è“å›¾æ³¨å†Œ
â”‚   â”‚   â”œâ”€â”€ main.py          # ä¸»é¡µé¢è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth.py          # è®¤è¯è·¯ç”±ï¼ˆç™»å½•/æ³¨å†Œï¼‰
â”‚   â”‚   â”œâ”€â”€ prompts.py       # æç¤ºè¯è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ admin.py         # ç®¡ç†è·¯ç”±
â”‚   â”‚   â””â”€â”€ user.py          # ç”¨æˆ·è·¯ç”±
â”‚   â”œâ”€â”€ services/            # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ prompt_service.py
â”‚   â”‚   â”œâ”€â”€ user_service.py
â”‚   â”‚   â”œâ”€â”€ admin_service.py
â”‚   â”‚   â””â”€â”€ tag_service.py
â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ decorators.py    # è£…é¥°å™¨ï¼ˆç™»å½•éªŒè¯ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ helpers.py       # è¾…åŠ©å‡½æ•°
â”‚   â”‚   â””â”€â”€ file_upload.py   # æ–‡ä»¶ä¸Šä¼ å¤„ç†
â”‚   â”œâ”€â”€ templates/            # HTML æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ base.html
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”œâ”€â”€ auth/            # è®¤è¯ç›¸å…³æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ prompts/         # æç¤ºè¯ç›¸å…³æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ admin/           # ç®¡ç†é¢æ¿æ¨¡æ¿
â”‚   â”‚   â””â”€â”€ user/            # ç”¨æˆ·ç›¸å…³æ¨¡æ¿
â”‚   â””â”€â”€ static/              # é™æ€èµ„æº
â”‚       â”œâ”€â”€ css/
â”‚       â”œâ”€â”€ js/
â”‚       â””â”€â”€ img/
â”œâ”€â”€ instance/                 # æ•°æ®åº“æ–‡ä»¶ç›®å½•ï¼ˆGit å¿½ç•¥ï¼‰
â”œâ”€â”€ logs/                     # æ—¥å¿—æ–‡ä»¶ç›®å½•ï¼ˆGit å¿½ç•¥ï¼‰
â”œâ”€â”€ init_db.py               # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ run.py                   # å¼€å‘ç¯å¢ƒè¿è¡Œå…¥å£
â”œâ”€â”€ wsgi.py                  # WSGI å…¥å£ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
â”œâ”€â”€ requirements.txt         # Python ä¾èµ–
â”œâ”€â”€ Dockerfile               # Docker é•œåƒæ„å»ºæ–‡ä»¶
â”œâ”€â”€ docker-compose.yml       # Docker Compose é…ç½®
â”œâ”€â”€ docker-entrypoint.sh     # Docker å®¹å™¨å¯åŠ¨è„šæœ¬
â”œâ”€â”€ nginx.conf               # Nginx é…ç½®æ–‡ä»¶
â””â”€â”€ README.md               # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ææ¡ä»¶

- Python 3.9+
- pip (Python åŒ…ç®¡ç†å™¨)
- (å¯é€‰) Docker å’Œ Docker Compose

### æœ¬åœ°å¼€å‘ç¯å¢ƒè®¾ç½®

#### 1. å…‹éš†ä»“åº“

```bash
git clone https://github.com/yourusername/prompt-manager.git
cd prompt-manager
```

#### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

```bash
# Linux/macOS
python -m venv venv
source venv/bin/activate

# Windows
python -m venv venv
venv\Scripts\activate
```

#### 3. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

#### 4. åˆå§‹åŒ–æ•°æ®åº“

```bash
python init_db.py
```

è¿™å°†åˆ›å»ºæ•°æ®åº“è¡¨å¹¶ç”Ÿæˆé»˜è®¤ç®¡ç†å‘˜è´¦æˆ·å’Œé‚€è¯·ç ã€‚

#### 5. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰ï¼š

```env
SECRET_KEY=your-secret-key-here
FLASK_DEBUG=True
ENABLE_CORS=False
```

#### 6. å¯åŠ¨åº”ç”¨

```bash
# å¼€å‘æ¨¡å¼
python run.py

# æˆ–ä½¿ç”¨ Flask CLI
flask run
```

#### 7. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://127.0.0.1:5000`

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### ä½¿ç”¨ Gunicornï¼ˆLinux/macOSï¼‰

```bash
gunicorn --workers=4 --threads=2 --bind 0.0.0.0:5000 wsgi:app
```

#### ä½¿ç”¨ Waitressï¼ˆWindowsï¼‰

```bash
waitress-serve --host=0.0.0.0 --port=5000 wsgi:app
```

## ğŸ³ Docker éƒ¨ç½²

### ä½¿ç”¨ Docker Composeï¼ˆæ¨èï¼‰

#### 1. é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
SECRET_KEY=your-secret-key-here-change-this
FLASK_DEBUG=false
```

#### 2. æ„å»ºå¹¶å¯åŠ¨

```bash
docker-compose up -d
```

#### 3. æŸ¥çœ‹æ—¥å¿—

```bash
docker-compose logs -f
```

#### 4. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:5000`

### æ‰‹åŠ¨ Docker éƒ¨ç½²

#### 1. æ„å»ºé•œåƒ

```bash
docker build -t prompt-manager:latest .
```

#### 2. è¿è¡Œå®¹å™¨

```bash
docker run -d \
  --name prompt-manager \
  -p 5000:80 \
  -v $(pwd)/instance:/app/instance \
  -v $(pwd)/logs:/app/logs \
  -e SECRET_KEY=your-secret-key-here \
  prompt-manager:latest
```

### Docker é…ç½®è¯´æ˜

- **ç«¯å£æ˜ å°„**ï¼šå®¹å™¨å†…éƒ¨ 80 ç«¯å£æ˜ å°„åˆ°ä¸»æœº 5000 ç«¯å£
- **æ•°æ®æŒä¹…åŒ–**ï¼š
  - `./instance` â†’ `/app/instance` (æ•°æ®åº“æ–‡ä»¶)
  - `./logs` â†’ `/app/logs` (æ—¥å¿—æ–‡ä»¶)
  - `./uploads` â†’ `/app/app/static/img/avatars` (ä¸Šä¼ çš„å¤´åƒ)
- **å¥åº·æ£€æŸ¥**ï¼šå®¹å™¨åŒ…å«å¥åº·æ£€æŸ¥ç«¯ç‚¹ `/health`

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡å          | è¯´æ˜                   | é»˜è®¤å€¼    |
| --------------- | ---------------------- | --------- |
| `SECRET_KEY`    | Flask å¯†é’¥ï¼ˆå¿…é¡»ä¿®æ”¹ï¼‰ | `dev_key` |
| `FLASK_DEBUG`   | è°ƒè¯•æ¨¡å¼               | `False`   |
| `ENABLE_CORS`   | å¯ç”¨è·¨åŸŸ               | `False`   |
| `CORS_ORIGIN`   | å…è®¸çš„è·¨åŸŸæº           | `*`       |
| `HTTPS_ENABLED` | å¯ç”¨ HTTPS             | `False`   |

### é…ç½®æ–‡ä»¶

ä¸»è¦é…ç½®åœ¨ `app/config.py` ä¸­ï¼š

- **æ•°æ®åº“è·¯å¾„**ï¼š`instance/prompts.db`
- **æ—¥å¿—ç›®å½•**ï¼š`logs/`
- **é™æ€æ–‡ä»¶**ï¼š`app/static/`
- **ä¸Šä¼ ç›®å½•**ï¼š`app/static/img/avatars/`

## ğŸ‘¤ é»˜è®¤è´¦æˆ·

æ•°æ®åº“åˆå§‹åŒ–åä¼šåˆ›å»ºä»¥ä¸‹è´¦æˆ·ï¼š

- **ç®¡ç†å‘˜è´¦æˆ·**:
  - é‚®ç®±: `admin@example.com`
  - å¯†ç : `admin123`

**âš ï¸ é‡è¦æç¤º**ï¼šé¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼

åˆå§‹åŒ–æ—¶è¿˜ä¼šç”Ÿæˆ 5 ä¸ªé‚€è¯·ç ï¼Œå¯åœ¨ç®¡ç†å‘˜é¢æ¿æŸ¥çœ‹ã€‚

## ğŸ“š API è·¯ç”±

### ä¸»è¦è·¯ç”±

- `/` - é¦–é¡µ
- `/login` - ç”¨æˆ·ç™»å½•
- `/register` - ç”¨æˆ·æ³¨å†Œ
- `/logout` - ç”¨æˆ·ç™»å‡º
- `/create-prompt` - åˆ›å»ºæç¤ºè¯
- `/my-prompts` - æˆ‘çš„æç¤ºè¯
- `/prompts/<id>` - æŸ¥çœ‹æç¤ºè¯
- `/prompts/all` - æ‰€æœ‰å…¬å¼€æç¤ºè¯
- `/search` - æœç´¢æç¤ºè¯
- `/profile/<user_id>` - ç”¨æˆ·èµ„æ–™
- `/admin/invite-codes` - ç®¡ç†é‚€è¯·ç ï¼ˆç®¡ç†å‘˜ï¼‰
- `/admin/users` - ç”¨æˆ·ç®¡ç†ï¼ˆç®¡ç†å‘˜ï¼‰
- `/health` - å¥åº·æ£€æŸ¥ç«¯ç‚¹

## ğŸ”§ å¼€å‘æŒ‡å—

### ä»£ç ç»“æ„è¯´æ˜

é¡¹ç›®é‡‡ç”¨æ ‡å‡†çš„ Flask åº”ç”¨å·¥å‚æ¨¡å¼ï¼š

- **åº”ç”¨å·¥å‚**ï¼š`app/__init__.py` ä¸­çš„ `create_app()` å‡½æ•°
- **é…ç½®ç®¡ç†**ï¼š`app/config.py` é›†ä¸­ç®¡ç†é…ç½®
- **è“å›¾è·¯ç”±**ï¼š`app/routes/` ç›®å½•ä¸‹æŒ‰åŠŸèƒ½æ¨¡å—åˆ’åˆ†
- **ä¸šåŠ¡é€»è¾‘**ï¼š`app/services/` ç›®å½•ä¸‹å°è£…ä¸šåŠ¡é€»è¾‘
- **æ•°æ®åº“æ“ä½œ**ï¼š`app/database/db.py` å°è£…æ•°æ®åº“è¿æ¥

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `app/routes/` åˆ›å»ºæ–°çš„è“å›¾æ–‡ä»¶
2. åœ¨ `app/services/` å®ç°ä¸šåŠ¡é€»è¾‘
3. åœ¨ `app/templates/` åˆ›å»ºå¯¹åº”æ¨¡æ¿
4. åœ¨ `app/routes/__init__.py` æ³¨å†Œè“å›¾

### æ•°æ®åº“è¿ç§»

å½“å‰ä½¿ç”¨ SQLiteï¼Œå¦‚éœ€è¿ç§»åˆ°å…¶ä»–æ•°æ®åº“ï¼š

1. ä¿®æ”¹ `app/config.py` ä¸­çš„æ•°æ®åº“é…ç½®
2. æ›´æ–° `init_db.py` ä¸­çš„ SQL è¯­å¥ï¼ˆå¦‚éœ€è¦ï¼‰
3. è¿è¡Œ `python init_db.py` é‡æ–°åˆå§‹åŒ–

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
python -m pytest

# æ£€æŸ¥ä»£ç é£æ ¼
flake8 app/

# ç±»å‹æ£€æŸ¥
mypy app/
```

## ğŸ“ æ—¥å¿—

æ—¥å¿—æ–‡ä»¶ä¿å­˜åœ¨ `logs/app.log`ï¼Œæ”¯æŒè‡ªåŠ¨è½®è½¬ï¼š

- å•ä¸ªæ–‡ä»¶æœ€å¤§ï¼š10MB
- ä¿ç•™æ–‡ä»¶æ•°ï¼š10 ä¸ª
- æ—¥å¿—çº§åˆ«ï¼šç”Ÿäº§ç¯å¢ƒ INFOï¼Œå¼€å‘ç¯å¢ƒ DEBUG

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºåŠŸèƒ½å»ºè®®ï¼

### è´¡çŒ®æµç¨‹

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

### ä»£ç è§„èŒƒ

- éµå¾ª PEP 8 Python ä»£ç è§„èŒƒ
- ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å’Œå‡½æ•°å
- æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£å­—ç¬¦ä¸²
- ç¡®ä¿ä»£ç é€šè¿‡ lint æ£€æŸ¥

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦æƒ…å‚è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ“ è”ç³»æ–¹å¼

- **é—®é¢˜åé¦ˆ**ï¼š[åˆ›å»º Issue](https://github.com/yourusername/prompt-manager/issues)
- **åŠŸèƒ½å»ºè®®**ï¼š[åˆ›å»º Feature Request](https://github.com/yourusername/prompt-manager/issues/new)
- **Pull Request**ï¼š[æäº¤ PR](https://github.com/yourusername/prompt-manager/pulls)

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Starï¼**
